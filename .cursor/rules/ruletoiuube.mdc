---
description: >
  Quy táº¯c phÃ¡t triá»ƒn thá»‘ng nháº¥t cho toÃ n bá»™ dá»± Ã¡n.  
  Má»¥c tiÃªu: Code Ä‘á»“ng bá»™, hiá»‡u nÄƒng, dá»… báº£o trÃ¬, vÃ  táº­n dá»¥ng tá»‘i Ä‘a thÃ nh pháº§n sáºµn cÃ³.  
globs:
  - "**/*.ts"
  - "**/*.js"
  - "**/*.java"
  - "**/*.py"
  - "**/*.json"
  - "**/*.md"
alwaysApply: true
---

# âœ… Quy táº¯c tá»•ng thá»ƒ
- Viáº¿t code **Ä‘á»“ng bá»™, tá»‘i giáº£n**, trÃ¡nh dÆ° thá»«a.  
- Æ¯u tiÃªn **hiá»‡u nÄƒng vÃ  kháº£ nÄƒng má»Ÿ rá»™ng** thay vÃ¬ thÃªm thÆ° viá»‡n khÃ´ng cáº§n thiáº¿t.  
- Má»i module pháº£i **Ä‘á»™c láº­p rÃµ rÃ ng**, khÃ´ng rÃ ng buá»™c vÃ²ng trÃ²n.  
- Khi thÃªm tÃ­nh nÄƒng má»›i, **Ä‘á»c vÃ  cáº­p nháº­t file `PROJECT.md`** mÃ´ táº£ thay Ä‘á»•i, cÃ´ng nghá»‡, cáº¥u trÃºc dá»¯ liá»‡u.  

# ğŸ“¦ Cáº¥u trÃºc dá»± Ã¡n
- TÃ¡ch rÃµ `models`, `controllers`, `services`, `routes`, `utils`.  
- Má»i thao tÃ¡c DB pháº£i thÃ´ng qua **service layer** Ä‘á»ƒ dá»… báº£o trÃ¬ vÃ  kiá»ƒm thá»­.  
- KhÃ´ng viáº¿t logic trá»±c tiáº¿p trong route hoáº·c controller.  
- Äáº·t tÃªn file vÃ  biáº¿n **snake_case hoáº·c camelCase thá»‘ng nháº¥t**.  

# ğŸ’¾ Dá»¯ liá»‡u & Quan há»‡
- TrÃ¡nh quan há»‡ nhiá»u-nhiá»u náº¿u cÃ³ thá»ƒ.  
- Æ¯u tiÃªn thiáº¿t káº¿ **báº£ng trung gian tÆ°á»ng minh** (vd: `CartItem` cÃ³ trÆ°á»ng `userId`, `restaurantId`, `foodId`).  
- Giá» hÃ ng chá»‰ load theo **`restaurantId` hiá»‡n táº¡i**.  

# âš™ï¸ Code style & Comment
- Comment ngáº¯n gá»n báº±ng **tiáº¿ng Viá»‡t**, giáº£i thÃ­ch logic, khÃ´ng mÃ´ táº£ hiá»ƒn nhiÃªn.  
- Má»—i file cÃ³ pháº§n mÃ´ táº£ Ä‘áº§u file (má»¥c Ä‘Ã­ch, input/output).  
- Format thá»‘ng nháº¥t (Prettier hoáº·c ESLint).  

# ğŸ”„ Quy trÃ¬nh lÃ m viá»‡c
1. TrÆ°á»›c khi code: Cursor **Ä‘á»c `PROJECT.md`** Ä‘á»ƒ náº¯m context.  
2. Trong khi code: Cursor **tuÃ¢n theo rule nÃ y**, gá»£i Ã½ theo cáº¥u trÃºc chuáº©n.  
3. Sau khi cáº­p nháº­t code hoáº·c thÃªm module: Cursor **tá»± Ä‘á»™ng cáº­p nháº­t `PROJECT.md`** (mÃ´ táº£, API, model, cÃ´ng nghá»‡).  

# ğŸ§  Quy táº¯c AI há»— trá»£
- Khi AI sinh code, luÃ´n kiá»ƒm tra **tÃ­nh tÆ°Æ¡ng thÃ­ch** vá»›i module cÃ³ sáºµn.  
- Náº¿u cÃ³ thÆ° viá»‡n tÆ°Æ¡ng tá»± Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng, **tÃ¡i sá»­ dá»¥ng** thay vÃ¬ cÃ i má»›i.  
- Náº¿u khÃ´ng cháº¯c vá» cáº¥u trÃºc, **Ä‘á»c láº¡i toÃ n bá»™ cÃ¢y thÆ° má»¥c vÃ  `PROJECT.md`** Ä‘á»ƒ Ä‘á»“ng bá»™.  
- Khi viáº¿t API, **tuÃ¢n theo RESTful chuáº©n**, Ä‘áº·t rÃµ `GET/POST/PUT/DELETE` vÃ  mÃ£ pháº£n há»“i há»£p lÃ½.  

# ğŸ§© Hiá»‡u nÄƒng
- DÃ¹ng **index** há»£p lÃ½ trong DB.  
- Cache há»£p lÃ½ táº¡i táº§ng service (Redis hoáº·c memory).  
- Háº¡n cháº¿ truy váº¥n láº·p.  
- Æ¯u tiÃªn xá»­ lÃ½ báº¥t Ä‘á»“ng bá»™ (Promise.all, transaction batch).  

# ğŸ” Báº£o máº­t
- Validate dá»¯ liá»‡u Ä‘áº§u vÃ o (Joi/Zod).  
- KhÃ´ng log thÃ´ng tin nháº¡y cáº£m.  
- áº¨n khÃ³a vÃ  URL trong biáº¿n mÃ´i trÆ°á»ng `.env`.  

# ğŸ“ˆ Logging & GiÃ¡m sÃ¡t
- Ghi log quan trá»ng (error, transaction, event).  
- Táº¡o middleware thá»‘ng kÃª thá»i gian pháº£n há»“i.  
- Khi cÃ³ lá»—i, **ghi log + stack trace**, khÃ´ng áº©n lá»—i gá»‘c.  

# ğŸš€ Triá»ƒn khai
- LuÃ´n kiá»ƒm thá»­ báº±ng Postman hoáº·c Jest trÆ°á»›c khi merge.  
- Má»—i láº§n build má»›i pháº£i cáº­p nháº­t version trong `PROJECT.md`.  

